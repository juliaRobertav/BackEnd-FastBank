Fazendo UPLoad de Imagem com Django Rest Frame Work

1 – Instalar a biblioteca Pillow

pip install pillow

2 - Em Model.py acrescentaremos o campo “foto” na classe do Cliente e criaremos uma função que irá compor o nome da imagem que será carregada no servidor..

Na Classe Cliente acrecentar o campo

foto = models.ImageField(upload_to=upload_imagem_cliente, blank=True, null=True)

O destino da imagem direcionamos para uma função chamada upload_imagem_cliente a qual deveremos criá-la agora como segue

def upload_imagem_cliente(instance, filename):
return f’{instance.id_produto}-{filename}’

3 – Em settings.py criar no final arquivo após a variavel STATIC_URL , vamos criar duas novas variáveis de ambiente como segue:

MEDIA_URL = ‘/media/’

MEDIA_ROOT = os.path.join(BASE_DIR, ‘media’)

Media_URL recebe o nome da url onde armazenaremos as imagens

Media_root armazena o caminho absoluto da URL e para isso utizimos a biblioteca "os" a qual precisamos importar lá em cima no arquivo settings.py

import os


4 - Em URLs.py do Projeto devemos incluir uma especificação dessa nossa URL de armazenamento das imagens,. Para isso inicialmente devemos importar as seguintes bibliotecas como seguem:

from django.conf.urls.static import static

from dajngo.conf import settings


e na sessão urlpaterns acrescentar após o fechamento do colchetes ‘] ‘

+ static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

5 – Como alteramos a Classe Cleinte incluindo o campo “Imagem” devemos então executar os comando makemigrations e migrate como seguem:

python manage.py makemigrations

python manage.py migrate


6 – Rodar o Servidor e testar a API

Fazendo UP Load de imagem com DJANGO





Exemplo no YT
https://www.youtube.com/watch?v=Syoz9ldmS6o

